{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n\n  // 0. Инициализация иконок\n  if (typeof lucide !== 'undefined') {\n      lucide.createIcons();\n  }\n\n  // 1. Плавный скролл (Lenis)\n  const lenis = new Lenis({\n      duration: 1.2,\n      easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n      direction: 'vertical',\n      gestureDirection: 'vertical',\n      smooth: true,\n      mouseMultiplier: 1,\n      smoothTouch: false,\n      touchMultiplier: 2,\n  });\n\n  function raf(time) {\n      lenis.raf(time);\n      requestAnimationFrame(raf);\n  }\n  requestAnimationFrame(raf);\n\n  // 2. Мобильное меню\n  const burgerBtn = document.getElementById('burger-btn');\n  const navMenu = document.getElementById('nav-menu');\n  const navLinks = document.querySelectorAll('.header__link');\n\n  if (burgerBtn && navMenu) {\n      burgerBtn.addEventListener('click', () => {\n          navMenu.classList.toggle('is-active');\n\n          // Анимация иконки бургера (опционально смена цвета)\n          const icon = burgerBtn.querySelector('svg'); // Lucide создает svg\n          if (navMenu.classList.contains('is-active')) {\n              burgerBtn.style.color = 'var(--color-primary)';\n          } else {\n              burgerBtn.style.color = 'var(--color-text-main)';\n          }\n      });\n\n      // Закрытие меню при клике на ссылку\n      navLinks.forEach(link => {\n          link.addEventListener('click', () => {\n              navMenu.classList.remove('is-active');\n              burgerBtn.style.color = 'var(--color-text-main)';\n          });\n      });\n  }\n\n  // 3. GSAP Setup\n  gsap.registerPlugin(ScrollTrigger);\n\n  // 4. Three.js Hero Background (3D Анимация)\n  const initThreeJS = () => {\n      const canvasContainer = document.getElementById('hero-canvas');\n      if (!canvasContainer) return; // Если секции нет (например, на страницах Privacy), выходим\n\n      // Сцена\n      const scene = new THREE.Scene();\n      scene.fog = new THREE.Fog(0xf0f9ff, 10, 50); // Цвет тумана = цвет фона сайта\n\n      // Камера\n      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n      camera.position.z = 30;\n\n      // Рендерер\n      const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\n      renderer.setSize(window.innerWidth, window.innerHeight);\n      renderer.setPixelRatio(window.devicePixelRatio);\n      canvasContainer.appendChild(renderer.domElement);\n\n      // Объект: Икосаэдр (Кристалл)\n      const geometry = new THREE.IcosahedronGeometry(10, 2);\n      const material = new THREE.MeshBasicMaterial({\n          color: 0x0284c7, // --color-primary\n          wireframe: true,\n          transparent: true,\n          opacity: 0.3\n      });\n\n      const sphere = new THREE.Mesh(geometry, material);\n      scene.add(sphere);\n\n      // Частицы вокруг\n      const particlesGeometry = new THREE.BufferGeometry();\n      const particlesCount = 200;\n      const posArray = new Float32Array(particlesCount * 3);\n\n      for(let i = 0; i < particlesCount * 3; i++) {\n          posArray[i] = (Math.random() - 0.5) * 60;\n      }\n\n      particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));\n      const particlesMaterial = new THREE.PointsMaterial({\n          size: 0.15,\n          color: 0x0369a1,\n          transparent: true,\n          opacity: 0.6\n      });\n\n      const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);\n      scene.add(particlesMesh);\n\n      // Интерактив с мышью\n      let mouseX = 0;\n      let mouseY = 0;\n      let targetX = 0;\n      let targetY = 0;\n\n      const windowHalfX = window.innerWidth / 2;\n      const windowHalfY = window.innerHeight / 2;\n\n      document.addEventListener('mousemove', (event) => {\n          mouseX = (event.clientX - windowHalfX);\n          mouseY = (event.clientY - windowHalfY);\n      });\n\n      // Цикл анимации\n      const animate = () => {\n          requestAnimationFrame(animate);\n\n          targetX = mouseX * 0.001;\n          targetY = mouseY * 0.001;\n\n          sphere.rotation.y += 0.05 * (targetX - sphere.rotation.y);\n          sphere.rotation.x += 0.05 * (targetY - sphere.rotation.x);\n\n          sphere.rotation.z += 0.002;\n          particlesMesh.rotation.y -= 0.001;\n\n          renderer.render(scene, camera);\n      };\n\n      animate();\n\n      // Появление канваса\n      gsap.to(canvasContainer, { opacity: 1, duration: 2, delay: 0.5 });\n\n      // Ресайз окна\n      window.addEventListener('resize', () => {\n          camera.aspect = window.innerWidth / window.innerHeight;\n          camera.updateProjectionMatrix();\n          renderer.setSize(window.innerWidth, window.innerHeight);\n      });\n  };\n\n  if (typeof THREE !== 'undefined') {\n      initThreeJS();\n  }\n\n  // 5. GSAP Animations: Hero Entry\n  if (document.querySelector('.hero')) {\n      const tlHero = gsap.timeline();\n      tlHero.from('.hero__tag', { y: 20, opacity: 0, duration: 0.8, ease: 'power3.out', delay: 0.5 })\n            .from('.hero__title', { y: 30, opacity: 0, duration: 1, ease: 'power3.out' }, '-=0.6')\n            .from('.hero__subtitle', { y: 20, opacity: 0, duration: 0.8, ease: 'power3.out' }, '-=0.6')\n            .from('.hero__actions', { y: 20, opacity: 0, duration: 0.8, ease: 'power3.out' }, '-=0.6')\n            .from('.hero__scroll', { opacity: 0, duration: 1 }, '-=0.4');\n  }\n\n  // 6. GSAP Animations: Sections Reveal\n  const sectionTitles = document.querySelectorAll('.section-title');\n  if (sectionTitles.length > 0) {\n      // Общая анимация для заголовков\n      // (Опционально, если хочешь анимировать каждый заголовок отдельно)\n  }\n\n  // About Section\n  if (document.querySelector('.about')) {\n      gsap.from('.about__content > *', {\n          scrollTrigger: { trigger: '.about', start: 'top 80%' },\n          y: 30, opacity: 0, duration: 0.8, stagger: 0.1\n      });\n  }\n\n  // Stats Counter\n  const stats = document.querySelectorAll('.stat-number');\n  stats.forEach(stat => {\n      const target = +stat.getAttribute('data-count');\n      gsap.to(stat, {\n          scrollTrigger: { trigger: '.about__stats', start: 'top 85%' },\n          innerHTML: target,\n          duration: 2,\n          snap: { innerHTML: 1 },\n          ease: 'power2.out'\n      });\n  });\n\n  // Benefits Cards\n  if (document.querySelector('.benefits')) {\n      gsap.from('.benefit-card', {\n          scrollTrigger: { trigger: '.benefits', start: 'top 75%' },\n          y: 50, opacity: 0, duration: 0.8, stagger: 0.2\n      });\n  }\n\n  // 7. Contact Form Logic & Captcha\n  const form = document.getElementById('contactForm');\n  const successMsg = document.getElementById('successMessage');\n  const phoneInput = document.getElementById('phone');\n  const captchaInput = document.getElementById('captcha');\n  const captchaLabel = document.getElementById('captchaLabel');\n\n  if (form) {\n      // Генерация примера\n      const num1 = Math.floor(Math.random() * 10) + 1;\n      const num2 = Math.floor(Math.random() * 10) + 1;\n      captchaLabel.textContent = `Сколько будет ${num1} + ${num2}?`;\n      const correctAnswer = num1 + num2;\n\n      // Валидация телефона (только цифры)\n      phoneInput.addEventListener('input', (e) => {\n          e.target.value = e.target.value.replace(/[^0-9+]/g, '');\n      });\n\n      // Обработка отправки\n      form.addEventListener('submit', (e) => {\n          e.preventDefault();\n          let isValid = true;\n\n          // 1. Проверка полей\n          const inputs = form.querySelectorAll('input[required]');\n          inputs.forEach(input => {\n              const parent = input.closest('.form-group');\n              if(!input.value.trim()) {\n                  parent?.classList.add('error');\n                  isValid = false;\n              } else {\n                  parent?.classList.remove('error');\n              }\n          });\n\n          // 2. Проверка капчи\n          const captchaParent = captchaInput.closest('.form-group');\n          if (parseInt(captchaInput.value) !== correctAnswer) {\n              captchaParent.classList.add('error');\n              captchaParent.querySelector('.form-error').textContent = 'Неверный ответ';\n              isValid = false;\n          } else {\n              captchaParent.classList.remove('error');\n          }\n\n          if (isValid) {\n              // Имитация отправки\n              const btn = form.querySelector('button[type=\"submit\"]');\n              const originalText = btn.innerHTML;\n              btn.innerHTML = 'Отправка...';\n              btn.disabled = true;\n\n              setTimeout(() => {\n                  successMsg.classList.add('visible');\n                  form.reset();\n                  // Сбрасываем кнопку (хотя сообщение перекрывает форму)\n                  btn.innerHTML = originalText;\n                  btn.disabled = false;\n              }, 1500);\n          }\n      });\n\n      // Убираем ошибку при фокусе\n      form.querySelectorAll('input').forEach(input => {\n          input.addEventListener('focus', () => {\n              input.closest('.form-group')?.classList.remove('error');\n          });\n      });\n  }\n\n  // 8. Cookie Popup\n  const cookiePopup = document.getElementById('cookiePopup');\n  const acceptBtn = document.getElementById('acceptCookies');\n\n  if (cookiePopup && acceptBtn) {\n      // Показываем через 2 секунды, если нет записи\n      setTimeout(() => {\n          if (!localStorage.getItem('cookiesAccepted')) {\n              cookiePopup.classList.add('is-active');\n          }\n      }, 2000);\n\n      acceptBtn.addEventListener('click', () => {\n          cookiePopup.classList.remove('is-active');\n          localStorage.setItem('cookiesAccepted', 'true');\n      });\n  }\n});"],"names":["lenis","raf","time","burgerBtn","navMenu","navLinks","link","initThreeJS","canvasContainer","scene","camera","renderer","geometry","material","sphere","particlesGeometry","particlesCount","posArray","i","particlesMaterial","particlesMesh","mouseX","mouseY","targetX","targetY","windowHalfX","windowHalfY","event","animate","stat","target","form","successMsg","phoneInput","captchaInput","captchaLabel","num1","num2","correctAnswer","e","isValid","input","parent","captchaParent","btn","originalText","_a","cookiePopup","acceptBtn"],"mappings":"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"}